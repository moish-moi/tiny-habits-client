<div class="habits-container" *ngIf="auth.isLoggedIn(); else notLogged">
  <h2>Your Habits ðŸŒ¼</h2>
  <button type="button" (click)="toggleArchived()">
    {{ showArchived ? 'Hide archived' : 'Show archived' }}
  </button>

  <div *ngIf="loading" class="spinner">Loading habits...</div>

  <div *ngIf="error" class="error">{{ error }}</div>

  <div *ngIf="!loading && !error && habits.length === 0" class="empty">
    No habits yet â€” create your first one below ðŸŒ±
  </div>

  <ul *ngIf="!loading && habits.length > 0">
    <li *ngFor="let h of habits" [class.archived]="h.isArchived">
      <span [style.color]="h.color">{{ h.title }}</span>
      <ng-container *ngIf="!h.isArchived; else archivedRow">
      <button (click)="checkin(h)">âœ… Check-in</button>
      <button (click)="archive(h)">Archive</button>
      <button (click)="deleteHabit(h)">Delete</button>
    </ng-container>

    <ng-template #archivedRow>
      <button (click)="unarchive(h)">Unarchive</button>
      <button (click)="deleteHabit(h)">Delete</button>
    </ng-template>

    <span class="streak">ðŸ”¥ {{ h.streak }}</span>
    </li>
  </ul>

  <form (ngSubmit)="addHabit()">
    <input type="text" [(ngModel)]="newTitle" name="title" placeholder="New habit title" required>
    <input type="color" [(ngModel)]="newColor" name="color">
    <button type="submit">Add Habit</button>
  </form>
</div>



<ng-template #notLogged>
  <p>Please login to view your habits.</p>
</ng-template>
